"use strict";(self.webpackChunktiny=self.webpackChunktiny||[]).push([[190],{7567:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>r});const s=JSON.parse('{"id":"bonus-Zeus","title":"Bonus Zeus","description":"- In this section we will install and use the Zeus mobile wallet to access and control our CLN node.","source":"@site/docs/bonus-Zeus.md","sourceDirName":".","slug":"/bonus-Zeus","permalink":"/nixos-mutinynet-tutorial/bonus-Zeus","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"title":"Bonus Zeus","sidebar_position":9},"sidebar":"tutorialSidebar","previous":{"title":"Bonus Mempool","permalink":"/nixos-mutinynet-tutorial/bonus-Mempool"},"next":{"title":"Required Cleanup","permalink":"/nixos-mutinynet-tutorial/REQUIRED-CLEANUP"}}');var o=i(4848),t=i(8453);const l={title:"Bonus Zeus",sidebar_position:9},a="BONUS: Zeus Wallet",c={},r=[{value:"Install Zeus on your phone",id:"install-zeus-on-your-phone",level:2},{value:"Add c-lightning-REST to your config",id:"add-c-lightning-rest-to-your-config",level:2},{value:"Switch to the new config",id:"switch-to-the-new-config",level:2},{value:"Access via Tor (see below for connecting via Tailscale)",id:"access-via-tor-see-below-for-connecting-via-tailscale",level:2},{value:"Configure Zeus",id:"configure-zeus",level:3},{value:"Access via Tailscale (optional)",id:"access-via-tailscale-optional",level:2},{value:"Create Tailscale.com account and connect your phone",id:"create-tailscalecom-account-and-connect-your-phone",level:3},{value:"Install tailscale on your server and connect it too",id:"install-tailscale-on-your-server-and-connect-it-too",level:3},{value:"Configure Zeus",id:"configure-zeus-1",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",input:"input",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"bonus-zeus-wallet",children:"BONUS: Zeus Wallet"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["In this section we will install and use the ",(0,o.jsx)(n.a,{href:"https://zeusln.com/",children:"Zeus mobile wallet"})," to access and control our CLN node."]}),"\n"]}),"\n",(0,o.jsx)(n.h1,{id:"exercise-install-and-connect-zeus-wallet-to-cln-via-tor",children:"Exercise: Install and connect Zeus Wallet to CLN via Tor"}),"\n",(0,o.jsx)(n.h2,{id:"install-zeus-on-your-phone",children:"Install Zeus on your phone"}),"\n",(0,o.jsxs)(n.p,{children:["First things first, make sure you download and install ",(0,o.jsx)(n.a,{href:"https://zeusln.com/",children:"Zeus"}),". We'll need it again in a few steps."]}),"\n",(0,o.jsx)(n.h2,{id:"add-c-lightning-rest-to-your-config",children:"Add c-lightning-REST to your config"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"https://github.com/Ride-The-Lightning/c-lightning-REST",children:"c-lightning-REST"})," is a service from the RTL team that exposes an LND-like REST interface. It is the recommended way to connect a mobile client like Zeus."]}),"\n",(0,o.jsxs)(n.li,{children:["You can see nix-bitcoin's documentation for Zeus ",(0,o.jsx)(n.a,{href:"https://github.com/fort-nix/nix-bitcoin/blob/24bc983363aab940ac42b1954335d3d57a63a00c/docs/services.md#use-zeus-mobile-lightning-wallet-via-tor",children:"here"})]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-nix",children:"  services.clightning-rest = {\n    enable = true;\n    # lndconnect is a binary the nix-bitcoin team created\n    # to display connection information for remote wallets\n    lndconnect = {\n      enable = true;\n\n      # additionally show tor hidden service for rest API\n      onion = true;\n    };\n  };\n"})}),"\n",(0,o.jsx)(n.h2,{id:"switch-to-the-new-config",children:"Switch to the new config"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"sudo nixos-rebuild switch --flake /etc/nixos/#btcpp-berlin-mutinynet\n"})}),"\n",(0,o.jsx)(n.h2,{id:"access-via-tor-see-below-for-connecting-via-tailscale",children:"Access via Tor (see below for connecting via Tailscale)"}),"\n",(0,o.jsx)(n.p,{children:"Tor can be a bit slow, but it's easier to set up than the other methods."}),"\n",(0,o.jsx)(n.p,{children:"Run the following command on your node to create a QR code with address and authentication information:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:"lndconnect-clightning\n"})}),"\n",(0,o.jsx)(n.h3,{id:"configure-zeus",children:"Configure Zeus"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Add a new node and scan the QR code"}),"\n",(0,o.jsxs)(n.li,{children:['Name it something meaningful like "Mutinynet Tor" Click ',(0,o.jsx)(n.code,{children:"SAVE NODE CONFIG"})]}),"\n",(0,o.jsx)(n.li,{children:"Congrats, now you can control your node on the go!"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"access-via-tailscale-optional",children:"Access via Tailscale (optional)"}),"\n",(0,o.jsxs)(n.p,{children:["Tailscale uses Wireguard under the hood and is similar to the ",(0,o.jsx)(n.a,{href:"https://github.com/fort-nix/nix-bitcoin/blob/24bc983363aab940ac42b1954335d3d57a63a00c/docs/services.md#use-zeus-mobile-lightning-wallet-via-wireguard",children:"Wireguard method detailed in the nix-bitcoin docs"}),", except you are slightly trusting Tailscale the company as a rendezvous point between your phone and server. Your traffic is still encrypted using SSL however, so as long as you verify the SSL cert the first time you connect, it's impossible for Tailscale to read your traffic."]}),"\n",(0,o.jsxs)(n.p,{children:["If you would like to use your node on mainnet, please consider using Wireguard as described in the link above, or use a ",(0,o.jsx)(n.a,{href:"https://headscale.net",children:"headscale"})," server instead."]}),"\n",(0,o.jsx)(n.h3,{id:"create-tailscalecom-account-and-connect-your-phone",children:"Create Tailscale.com account and connect your phone"}),"\n",(0,o.jsxs)(n.p,{children:["For the purposes of this section, Tailscale is fine. Go ahead and ",(0,o.jsx)(n.a,{href:"https://tailscale.com/",children:"create an account"}),", then install the Tailscale app on your phone and register your phone to your account."]}),"\n",(0,o.jsx)(n.h3,{id:"install-tailscale-on-your-server-and-connect-it-too",children:"Install tailscale on your server and connect it too"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Add the following to your config:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-nix",children:"  services.tailscale.enable = true;\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Now open port 3001 in your firewall so you can connect to your REST API over Tailscale:"}),"\n",(0,o.jsx)(n.p,{children:"Change this line:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-nix",children:"networking.firewall.allowedTCPPorts = [ 8333 9735 ];\n"})}),"\n",(0,o.jsx)(n.p,{children:"to look like:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-nix",children:"networking.firewall.allowedTCPPorts = [ 3001 8333 9735 ];\n"})}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"... and switch again!"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Now run:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:"sudo tailscale up\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"This will display a link that you can click to register your server on your tailnet, allowing your phone and your server to communicate as though they are on the same LAN, but from anywhere in the world."}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"configure-zeus-1",children:"Configure Zeus"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Go to your Tor node's connection settings page by clicking on the gear next to its icon."}),"\n",(0,o.jsxs)(n.li,{children:["Scroll to the bottom and click ",(0,o.jsx)(n.code,{children:"DUPLICATE NODE CONFIG"}),". This will allow us to reuse the macaroon, which is the same regardless of our connection method."]}),"\n",(0,o.jsxs)(n.li,{children:["In the ",(0,o.jsx)(n.code,{children:"Host"})," field, erase the .onion URL and put your server's Tailscale IP address (you can find this with ",(0,o.jsx)(n.code,{children:"tailscale status"}),")"]}),"\n",(0,o.jsx)(n.li,{children:"Click Save node config"}),"\n",(0,o.jsx)(n.li,{children:"Congrats, now you can control your node on the go, without having to deal with Tor's latency and reliability issues!"}),"\n"]}),"\n",(0,o.jsx)("br",{}),"\n",(0,o.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,o.jsxs)(n.li,{className:"task-list-item",children:[(0,o.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Install Zeus and Tailscale"]}),"\n",(0,o.jsxs)(n.li,{className:"task-list-item",children:[(0,o.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Create two node connections in Zeus, one for Tor and one for Tailscale"]}),"\n",(0,o.jsxs)(n.li,{className:"task-list-item",children:[(0,o.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Control your Lightning node from anywhere like a god"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>a});var s=i(6540);const o={},t=s.createContext(o);function l(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);